<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SJ Innovation íŒŒíŠ¸ë„ˆìŠ¤ ëª°</title>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } 
        from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCpFn2uM7Dibf9UpWZdSVOxOqcYceZwUtI",
            authDomain: "sj-innovation-a8f6b.firebaseapp.com",
            projectId: "sj-innovation-a8f6b",
            storageBucket: "sj-innovation-a8f6b.firebasestorage.app",
            messagingSenderId: "449389360798",
            appId: "1:449389360798:web:d1b490aa9c75807903ed8f",
            measurementId: "G-NED86350PH"
        };

        try {
            const app = initializeApp(firebaseConfig);
            window.auth = getAuth(app);
            window.createUser = createUserWithEmailAndPassword;
            window.signInUser = signInWithEmailAndPassword;
            window.logOut = signOut;
            window.isFirebaseReady = true; // ë¡œë”© ì™„ë£Œ ì‹ í˜¸
        } catch (e) {
            console.error("Firebase Error", e);
        }
    </script>

    <style>
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 font-sans">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸
        const Icon = ({ name, ...props }) => {
            const iconName = name.charAt(0).toLowerCase() + name.slice(1);
            return <i data-lucide={iconName} {...props}></i>;
        };

        // --- ì´ˆê¸° ìƒí’ˆ ë°ì´í„° ---
        const INITIAL_PRODUCTS = [
            { id: 1, name: "ìºì¹˜í‹°ë‹ˆí•‘ í•˜ì¸„í•‘ ë°©í•œìš©í’ˆ (ì¥ê°‘/ëª©ë„ë¦¬)", category: "ìœ ì•„ë™ì˜ë¥˜", price: 11900, originPrice: 23000, stock: 100, image: "ğŸ§£" },
            { id: 2, name: "í‹°ë‹ˆí•‘ ë§ˆìŠ¤í¬ ì‹œì¦Œ3 ìƒˆë¶€ë¦¬í˜• (20ë§¤)", category: "ìƒí™œ/ê±´ê°•", price: 12900, originPrice: 15900, stock: 500, image: "ğŸ˜·" },
            { id: 3, name: "ìŠˆíŒ…ìŠ¤íƒ€ í•˜ì¸„í•‘ ìœ ì•„ í„¸ëª©ë„ë¦¬", category: "ìœ ì•„ë™ì˜ë¥˜", price: 12900, originPrice: 21900, stock: 30, image: "ğŸ§£" },
            { id: 4, name: "ì´íƒˆë¦¬ì•ˆ ë¸Œë ˆì¸ë¡¯ ëœë¤ ë”±ì§€ (25íŒ©)", category: "ì™„êµ¬/êµêµ¬", price: 22900, originPrice: 39900, stock: 200, image: "ğŸ²" },
            { id: 5, name: "ìŠˆíŒ…ìŠ¤íƒ€ ìì„ ê¸€ì í•œê¸€í”ŒëŸ¬ìŠ¤", category: "ì™„êµ¬/êµêµ¬", price: 39900, originPrice: 49900, stock: 15, image: "ğŸ§²" },
            { id: 6, name: "êµì • ì “ê°€ë½ ìŠ¤í‘¼ í¬í¬ ì„¸íŠ¸", category: "ì£¼ë°©/ì‹ê¸°", price: 13900, originPrice: 17500, stock: 150, image: "ğŸ¥¢" },
            { id: 7, name: "ë…¼ìŠ¬ë¦½ ìŠ¤í…ì»µ (ì™•ìí•‘)", category: "ì£¼ë°©/ì‹ê¸°", price: 9900, originPrice: 15000, stock: 80, image: "ğŸ¥›" },
            { id: 8, name: "ìœ ì•„ ì–´ë¦°ì´ ì•ˆì‹¬ë½ ìŠ¤íŠ¸ë© ë³´í‹€", category: "ì£¼ë°©/ì‹ê¸°", price: 8900, originPrice: 12500, stock: 120, image: "ğŸ¼" },
            { id: 9, name: "ë””ì €íŠ¸ìƒµ ìì„ ì†Œê¿‰ë†€ì´", category: "ì™„êµ¬/êµêµ¬", price: 27000, originPrice: 35000, stock: 40, image: "ğŸ°" },
            { id: 10, name: "KF94 í†¤ì—…í• ë¸”ë™ë¼ë²¨ ë§ˆìŠ¤í¬", category: "ìƒí™œ/ê±´ê°•", price: 10900, originPrice: 20000, stock: 1000, image: "ğŸ˜·" }
        ];

        // --- ê´€ë¦¬ììš© íšŒì› ê°€ì§œ ë°ì´í„° ---
        const INITIAL_MEMBERS = [
            { id: 1, email: "partner01@naver.com", name: "ê¹€ì² ìˆ˜", store: "ëŒ€ë°•ë¬¸êµ¬", status: "ìŠ¹ì¸" },
            { id: 2, email: "toy_king@gmail.com", name: "ì´ì˜í¬", store: "í† ì´í‚¹ë¤", status: "ëŒ€ê¸°" },
            { id: 3, email: "sj_love@daum.net", name: "ë°•ë¯¼ìˆ˜", store: "SJì‚¬ë‘ì ", status: "ìŠ¹ì¸" }
        ];

        // ------------------------------------------
        // [1] ë¡œê·¸ì¸ & íšŒì›ê°€ì… í˜ì´ì§€
        // ------------------------------------------
        const LoginPage = ({ onLogin, onAdminLogin }) => {
            const [isLoginMode, setIsLoginMode] = useState(true);
            const [loading, setLoading] = useState(false);
            const [formData, setFormData] = useState({ email: '', password: '', confirmPassword: '', storeName: '' });

            const handleSubmit = async (e) => {
                e.preventDefault();
                setLoading(true);

                // â˜… ê´€ë¦¬ì ë¡œê·¸ì¸ íŠ¹ìˆ˜ ì²´í¬ (sj / 0914) â˜…
                if (isLoginMode && formData.email === 'sj' && formData.password === '0914') {
                    setTimeout(() => {
                        onAdminLogin(); // ê´€ë¦¬ì ëª¨ë“œë¡œ ì´ë™
                    }, 500);
                    return;
                }

                // ì¼ë°˜ íŒŒì´ì–´ë² ì´ìŠ¤ ë¡œê·¸ì¸
                if (!window.auth) {
                    alert("ì‹œìŠ¤í…œ ë¡œë”©ì¤‘ì…ë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.");
                    setLoading(false);
                    return;
                }

                try {
                    if (isLoginMode) {
                        await window.signInUser(window.auth, formData.email, formData.password);
                        // ì„±ê³µí•˜ë©´ App ì»´í¬ë„ŒíŠ¸ì—ì„œ ê°ì§€í•˜ì—¬ í™”ë©´ ì „í™˜
                    } else {
                        if (formData.password !== formData.confirmPassword) {
                            alert("ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."); setLoading(false); return;
                        }
                        await window.createUser(window.auth, formData.email, formData.password);
                        alert("íšŒì›ê°€ì… ì„±ê³µ! ìë™ìœ¼ë¡œ ë¡œê·¸ì¸ë©ë‹ˆë‹¤.");
                    }
                } catch (err) {
                    console.error(err);
                    if(err.code === 'auth/invalid-email') alert("ì´ë©”ì¼ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.");
                    else if(err.code === 'auth/invalid-credential') alert("ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.");
                    else if(err.code === 'auth/email-already-in-use') alert("ì´ë¯¸ ê°€ì…ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.");
                    else alert("ë¡œê·¸ì¸ ì˜¤ë¥˜: " + err.message);
                    setLoading(false);
                }
            };

            const handleChange = (e) => setFormData({ ...formData, [e.target.name]: e.target.value });

            return (
                <div className="min-h-screen flex items-center justify-center bg-slate-100 p-4">
                    <div className="bg-white rounded-2xl shadow-xl w-full max-w-md p-8 animate-in fade-in zoom-in duration-300">
                        <div className="text-center mb-8">
                            <div className="bg-slate-800 w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-4 text-white text-3xl font-bold shadow-lg">S</div>
                            <h1 className="text-2xl font-bold text-slate-800">{isLoginMode ? "íŒŒíŠ¸ë„ˆ ë¡œê·¸ì¸" : "íŒŒíŠ¸ë„ˆ íšŒì›ê°€ì…"}</h1>
                            <p className="text-slate-500 text-sm mt-2">SJ Innovation íì‡„í˜• ë„ë§¤ëª°</p>
                        </div>
                        <form onSubmit={handleSubmit} className="space-y-4">
                            <div>
                                <label className="block text-sm font-medium text-slate-700 mb-1">{isLoginMode ? "ì•„ì´ë”” (ì´ë©”ì¼)" : "ì´ë©”ì¼"}</label>
                                <input name="email" type="text" placeholder="example@sj.com" className="w-full p-3 border rounded-lg focus:ring-2 focus:ring-slate-800 outline-none transition-all" onChange={handleChange} required />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-slate-700 mb-1">ë¹„ë°€ë²ˆí˜¸</label>
                                <input name="password" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥" className="w-full p-3 border rounded-lg focus:ring-2 focus:ring-slate-800 outline-none transition-all" onChange={handleChange} required />
                            </div>
                            {!isLoginMode && (
                                <>
                                    <div>
                                        <label className="block text-sm font-medium text-slate-700 mb-1">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
                                        <input name="confirmPassword" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸ ì¬ì…ë ¥" className="w-full p-3 border rounded-lg focus:ring-2 focus:ring-slate-800 outline-none transition-all" onChange={handleChange} required />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-slate-700 mb-1">ìƒí˜¸ëª…</label>
                                        <input name="storeName" type="text" placeholder="ìƒí˜¸ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" className="w-full p-3 border rounded-lg focus:ring-2 focus:ring-slate-800 outline-none transition-all" onChange={handleChange} />
                                    </div>
                                </>
                            )}
                            <button type="submit" disabled={loading} className="w-full bg-slate-800 hover:bg-slate-900 text-white py-4 rounded-xl font-bold transition-all disabled:opacity-50 mt-6 shadow-md">
                                {loading ? "ì²˜ë¦¬ì¤‘..." : (isLoginMode ? "ë¡œê·¸ì¸ í•˜ê¸°" : "íšŒì›ê°€ì… ì™„ë£Œ")}
                            </button>
                        </form>
                        <div className="mt-6 text-center pt-6 border-t border-slate-100">
                            <p className="text-slate-500 text-sm">
                                {isLoginMode ? "ì•„ì§ ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”?" : "ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”?"}
                                <button onClick={() => setIsLoginMode(!isLoginMode)} className="ml-2 font-bold text-slate-800 underline hover:text-black">
                                    {isLoginMode ? "íšŒì›ê°€ì…" : "ë¡œê·¸ì¸"}
                                </button>
                            </p>
                        </div>
                    </div>
                </div>
            );
        };

        // ------------------------------------------
        // [2] ê´€ë¦¬ì í˜ì´ì§€ (Admin)
        // ------------------------------------------
        const AdminPage = ({ products, setProducts, onLogout }) => {
            const [activeTab, setActiveTab] = useState("products");
            const [members, setMembers] = useState(INITIAL_MEMBERS);

            const handleStockChange = (id, newStock) => {
                setProducts(products.map(p => p.id === id ? { ...p, stock: parseInt(newStock) } : p));
            };

            const handleMemberStatus = (id) => {
                setMembers(members.map(m => m.id === id ? { ...m, status: m.status === "ìŠ¹ì¸" ? "ì •ì§€" : "ìŠ¹ì¸" } : m));
            };

            return (
                <div className="min-h-screen bg-slate-100 font-sans">
                    <nav className="bg-slate-900 text-white px-6 py-4 flex justify-between items-center shadow-lg">
                        <div className="flex items-center gap-3">
                            <div className="font-bold text-xl">SJ ê´€ë¦¬ì ëª¨ë“œ</div>
                            <span className="bg-red-500 text-xs px-2 py-1 rounded font-bold">ADMIN</span>
                        </div>
                        <button onClick={onLogout} className="text-sm bg-slate-700 hover:bg-slate-600 px-4 py-2 rounded transition-colors">ë¡œê·¸ì•„ì›ƒ</button>
                    </nav>
                    
                    <div className="max-w-7xl mx-auto p-6">
                        <div className="flex gap-4 mb-6">
                            <button onClick={() => setActiveTab("products")} className={`px-6 py-3 rounded-lg font-bold transition-colors shadow-sm ${activeTab === "products" ? "bg-white text-slate-900" : "bg-slate-200 text-slate-500 hover:bg-slate-300"}`}>ğŸ“¦ ìƒí’ˆ/ì¬ê³  ê´€ë¦¬</button>
                            <button onClick={() => setActiveTab("members")} className={`px-6 py-3 rounded-lg font-bold transition-colors shadow-sm ${activeTab === "members" ? "bg-white text-slate-900" : "bg-slate-200 text-slate-500 hover:bg-slate-300"}`}>ğŸ‘¥ íšŒì› ê´€ë¦¬</button>
                        </div>

                        {activeTab === "products" ? (
                            <div className="bg-white rounded-xl shadow-sm overflow-hidden">
                                <table className="w-full text-left border-collapse">
                                    <thead className="bg-slate-50 text-slate-500 text-sm uppercase">
                                        <tr>
                                            <th className="p-4 border-b">ìƒí’ˆëª…</th>
                                            <th className="p-4 border-b">ê°€ê²©</th>
                                            <th className="p-4 border-b w-32">ì¬ê³ ìˆ˜ëŸ‰</th>
                                            <th className="p-4 border-b w-24">ê´€ë¦¬</th>
                                        </tr>
                                    </thead>
                                    <tbody className="divide-y divide-slate-100">
                                        {products.map(p => (
                                            <tr key={p.id} className="hover:bg-slate-50">
                                                <td className="p-4">
                                                    <div className="font-bold text-slate-800">{p.name}</div>
                                                    <div className="text-xs text-slate-400">{p.category}</div>
                                                </td>
                                                <td className="p-4 text-slate-600">â‚©{p.price.toLocaleString()}</td>
                                                <td className="p-4">
                                                    <input type="number" value={p.stock} onChange={(e) => handleStockChange(p.id, e.target.value)} className="w-full p-2 border rounded text-center focus:ring-2 focus:ring-blue-500 outline-none" />
                                                </td>
                                                <td className="p-4 text-center"><button className="text-blue-500 hover:underline text-sm">ì €ì¥</button></td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        ) : (
                            <div className="bg-white rounded-xl shadow-sm overflow-hidden">
                                <table className="w-full text-left">
                                    <thead className="bg-slate-50 text-slate-500 text-sm uppercase">
                                        <tr>
                                            <th className="p-4 border-b">ì´ë¦„/ìƒí˜¸ëª…</th>
                                            <th className="p-4 border-b">ì´ë©”ì¼</th>
                                            <th className="p-4 border-b">ìƒíƒœ</th>
                                            <th className="p-4 border-b">ê´€ë¦¬</th>
                                        </tr>
                                    </thead>
                                    <tbody className="divide-y divide-slate-100">
                                        {members.map(m => (
                                            <tr key={m.id} className="hover:bg-slate-50">
                                                <td className="p-4">
                                                    <div className="font-bold text-slate-800">{m.name}</div>
                                                    <div className="text-xs text-slate-400">{m.store}</div>
                                                </td>
                                                <td className="p-4 text-slate-600">{m.email}</td>
                                                <td className="p-4">
                                                    <span className={`px-2 py-1 rounded text-xs font-bold ${m.status === "ìŠ¹ì¸" ? "bg-green-100 text-green-700" : "bg-red-100 text-red-700"}`}>{m.status}</span>
                                                </td>
                                                <td className="p-4">
                                                    <button onClick={() => handleMemberStatus(m.id)} className="text-xs bg-slate-800 text-white px-3 py-1 rounded hover:bg-slate-700">
                                                        {m.status === "ìŠ¹ì¸" ? "ì •ì§€" : "ìŠ¹ì¸"}
                                                    </button>
                                                </td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // ------------------------------------------
        // [3] ì‡¼í•‘ëª° í˜ì´ì§€ (ê¸°ì¡´ ì½”ë“œ ìœ ì§€)
        // ------------------------------------------
        const ShopPage = ({ products, user, onLogout }) => {
            const [cart, setCart] = useState([]);
            const [isCartOpen, setIsCartOpen] = useState(false);
            const [selectedProduct, setSelectedProduct] = useState(null);

            const addToCart = (product) => {
                setCart(prev => {
                    const idx = prev.findIndex(item => item.id === product.id);
                    if(idx > -1) {
                        const newCart = [...prev]; newCart[idx].quantity += 1; return newCart;
                    }
                    return [...prev, { ...product, quantity: 1 }];
                });
                alert("ì¥ë°”êµ¬ë‹ˆì— ë‹´ê²¼ìŠµë‹ˆë‹¤.");
            };

            // ìƒí’ˆ ìƒì„¸ íŒì—… (ê°„ë‹¨ ë²„ì „)
            if(selectedProduct) {
                return (
                    <div className="fixed inset-0 bg-white z-50 overflow-y-auto animate-in slide-in-from-right">
                        <div className="p-4 border-b flex items-center gap-4 sticky top-0 bg-white/90 backdrop-blur">
                            <button onClick={() => setSelectedProduct(null)}><Icon name="ArrowLeft" /></button>
                            <h2 className="font-bold text-lg truncate">{selectedProduct.name}</h2>
                        </div>
                        <div className="p-6 max-w-2xl mx-auto">
                            <div className="aspect-square bg-slate-100 flex items-center justify-center text-[8rem] rounded-2xl mb-6">{selectedProduct.image}</div>
                            <h1 className="text-2xl font-bold mb-2">{selectedProduct.name}</h1>
                            <p className="text-xl font-bold text-slate-800 mb-6">â‚©{selectedProduct.price.toLocaleString()}</p>
                            <button onClick={() => { addToCart(selectedProduct); setSelectedProduct(null); }} className="w-full bg-slate-900 text-white py-4 rounded-xl font-bold">ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°</button>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-slate-50 pb-20">
                    <header className="bg-white shadow-sm px-4 h-16 flex items-center justify-between sticky top-0 z-40">
                        <div className="flex items-center gap-2 font-bold text-lg"><span className="bg-slate-800 text-white p-1 rounded">S</span> SJ Innovation</div>
                        <div className="flex gap-4">
                            <button onClick={() => setIsCartOpen(true)} className="relative"><Icon name="Boxes" />{cart.length > 0 && <span className="absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 rounded-full flex items-center justify-center">{cart.length}</span>}</button>
                            <button onClick={onLogout}><Icon name="LogOut" /></button>
                        </div>
                    </header>
                    <main className="p-4 max-w-7xl mx-auto grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4">
                        {products.map(p => (
                            <div key={p.id} onClick={() => setSelectedProduct(p)} className="bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden cursor-pointer hover:shadow-md transition-all">
                                <div className="aspect-square bg-slate-50 flex items-center justify-center text-5xl">{p.image}</div>
                                <div className="p-4">
                                    <div className="text-xs text-slate-400 mb-1">{p.category}</div>
                                    <h3 className="font-bold text-sm line-clamp-2 mb-2">{p.name}</h3>
                                    <div className="flex justify-between items-end">
                                        <span className="font-bold">â‚©{p.price.toLocaleString()}</span>
                                        <span className="text-xs text-slate-400">ì¬ê³  {p.stock}</span>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </main>
                    {isCartOpen && (
                        <div className="fixed inset-0 z-50 flex justify-end">
                            <div className="absolute inset-0 bg-black/30" onClick={() => setIsCartOpen(false)}></div>
                            <div className="bg-white w-full max-w-md h-full shadow-2xl relative p-4 flex flex-col animate-in slide-in-from-right">
                                <div className="flex justify-between mb-4 font-bold text-lg"><h2>ì¥ë°”êµ¬ë‹ˆ</h2><button onClick={() => setIsCartOpen(false)}><Icon name="X" /></button></div>
                                <div className="flex-1 overflow-y-auto space-y-4">
                                    {cart.map((item, i) => (
                                        <div key={i} className="flex gap-4 border-b pb-4"><div className="w-16 h-16 bg-slate-100 flex items-center justify-center text-2xl rounded">{item.image}</div><div><div className="font-bold">{item.name}</div><div className="text-sm">â‚©{item.price.toLocaleString()} x {item.quantity}</div></div></div>
                                    ))}
                                </div>
                                <button className="w-full bg-slate-800 text-white py-4 rounded-xl font-bold mt-4">ë°œì£¼ ì‹ ì²­í•˜ê¸°</button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // ------------------------------------------
        // [Main] ìµœìƒìœ„ App ì»´í¬ë„ŒíŠ¸
        // ------------------------------------------
        const App = () => {
            const [user, setUser] = useState(null);
            const [isAdmin, setIsAdmin] = useState(false);
            const [loading, setLoading] = useState(true);
            const [products, setProducts] = useState(INITIAL_PRODUCTS);

            useEffect(() => {
                lucide.createIcons();
                // 3ì´ˆê°„ ë¡œë”© ëŒ€ê¸° (Firebase ì—°ê²° ì•ˆì „ì¥ì¹˜)
                const timer = setTimeout(() => {
                    if(window.auth) {
                        window.auth.onAuthStateChanged((u) => {
                            if (!isAdmin) setUser(u); // ê´€ë¦¬ì ëª¨ë“œê°€ ì•„ë‹ ë•Œë§Œ ìœ ì € ì„¸íŒ…
                            setLoading(false);
                        });
                    } else {
                        setLoading(false); // ì—°ê²° ì‹¤íŒ¨í•´ë„ ì¼ë‹¨ í™”ë©´ì€ ë„ì›€
                    }
                }, 1000);
                return () => clearTimeout(timer);
            }, [isAdmin]);

            const handleLogout = () => {
                if (isAdmin) {
                    setIsAdmin(false);
                    setUser(null);
                    alert("ê´€ë¦¬ì ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤.");
                } else {
                    window.logOut(window.auth);
                }
            };

            const handleAdminLogin = () => {
                setIsAdmin(true);
                setUser({ email: 'admin' }); // ê°€ì§œ ìœ ì € ì„¸íŒ…
            };

            if (loading) return <div className="flex h-screen items-center justify-center bg-slate-50 font-bold text-slate-400">ì‹œìŠ¤í…œ ì—°ê²°ì¤‘...</div>;

            // 1. ê´€ë¦¬ìë©´ -> ê´€ë¦¬ì í˜ì´ì§€
            if (isAdmin) return <AdminPage products={products} setProducts={setProducts} onLogout={handleLogout} />;
            
            // 2. ì¼ë°˜ íšŒì›ì´ë©´ -> ì‡¼í•‘ëª° í˜ì´ì§€
            if (user) return <ShopPage products={products} user={user} onLogout={handleLogout} />;
            
            // 3. ë¡œê·¸ì¸ì´ ì•ˆë˜ì–´ ìˆìœ¼ë©´ -> ë¡œê·¸ì¸ í˜ì´ì§€
            return <LoginPage onLogin={() => {}} onAdminLogin={handleAdminLogin} />;
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
